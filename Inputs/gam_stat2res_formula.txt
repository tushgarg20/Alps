#Unit	GSIM residency		
#Instance Counts			
	numSlices	=	knob.global.NumSlices
	numGAM	=	COUNT('knob.uGAM.NumSlices')
	num_GAM_GAMTLB	=	numGAM
	num_GAM_GAMW	=	numGAM
	num_GAM_GACB	=	numGAM
	num_GAM_GAMD	=	numGAM
	num_GAM_GAFM	=	numGAM
	num_GAM_GAFS	=	numGAM
	num_GAM_GAP	=	numSlices
	num_GAM_GAPL3	=	numSlices
	num_GAM_GAPZ	=	numSlices
	num_GAM_GAPC	=	numSlices
	num_GAM_DOP	=	numGAM
	num_GAM_GLUE	=	numGAM
	num_GAM_SMALL	=	numGAM
	num_GAM_DFX	=	numGAM
	num_GAM_GAPS	=	numSlices
	num_GAM_GAMD_Cache  =       numGAM
	num_GAM_GAMTLB_EBB  =       numGAM
	num_GAM_GAMW_EBB    =       numGAM
	 @CLOCKS@	=	CrClock.Clocks
	 @2XCLOCKS@	=	2xCrClock.Clocks
	 @GAM@	=	uGAM
			
#GAMTLB			
	.temp_PS2_GAMTLB	=	(@CLOCKS@ -  @GAM@.pwr_GAMTLB_Stalled_or_Idle.CrClock)
	PS0_GAMTLB	=	 SUM(@GAM@.pwr_GAMTLB_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS1_GAMTLB	=	SUM(( @GAM@.pwr_GAMTLB_Stalled_or_Idle.CrClock -  @GAM@.pwr_GAMTLB_Idle.CrClock))/(@CLOCKS@*numGAM)
	PS2_GAMTLB	=	(@CLOCKS@ -  @GAM@.pwr_GAMTLB_Stalled_or_Idle.CrClock)/@CLOCKS@
	PS2_GAMTLB_Hit	=	SUM( @GAM@.GamL3TLB_L3.tlb_hits_GamL3TLB_L3 +  @GAM@.GamZTLB_Z.tlb_hits_GamZTLB_Z +  @GAM@.GamFFTLB_FF.tlb_hits_GamFFTLB_FF +  @GAM@.GamCTLB_C.tlb_hits_GamCTLB_C +  @GAM@.GamGacTLB_GAC.tlb_hits_GamGacTLB_GAC +  @GAM@.GamGavTLB_GAV.tlb_hits_GamGavTLB_GAV)/(@CLOCKS@*numGAM)
	PS2_GAMTLB_Miss	=	SUM( @GAM@.GamL3TLB_L3.tlb_MissTrue_GamL3TLB_L3 +  @GAM@.GamZTLB_Z.tlb_MissTrue_GamZTLB_Z +  @GAM@.GamFFTLB_FF.tlb_MissTrue_GamFFTLB_FF +  @GAM@.GamCTLB_C.tlb_MissTrue_GamCTLB_C +  @GAM@.GamGacTLB_GAC.tlb_MissTrue_GamGacTLB_GAC +  @GAM@.GamGavTLB_GAV.tlb_MissTrue_GamGavTLB_GAV)/(@CLOCKS@*numGAM)
	PS2_GAMTLB_HitNotPresent	=	SUM( @GAM@.GamL3TLB_L3.tlb_MissNotPresent_GamL3TLB_L3 +  @GAM@.GamZTLB_Z.tlb_MissNotPresent_GamZTLB_Z +  @GAM@.GamFFTLB_FF.tlb_MissNotPresent_GamFFTLB_FF +  @GAM@.GamCTLB_C.tlb_MissNotPresent_GamCTLB_C +  @GAM@.GamGacTLB_GAC.tlb_MissNotPresent_GamGacTLB_GAC +  @GAM@.GamGavTLB_GAV.tlb_MissNotPresent_GamGavTLB_GAV)/ (@CLOCKS@*numGAM)
	PS2_GAMTLB_Bypass	=	SUM( @GAM@.GamL3TLB.pwr_GAMTLB_Bypass +  @GAM@.GamZTLB.pwr_GAMTLB_Bypass +  @GAM@.GamFFTLB.pwr_GAMTLB_Bypass +  @GAM@.GamCTLB.pwr_GAMTLB_Bypass +  @GAM@.GamGacTLB.pwr_GAMTLB_Bypass +  @GAM@.GamGavTLB.pwr_GAMTLB_Bypass)/(@CLOCKS@*numGAM)
	PS2_GAMTLB_EBB_WRITE	=	PS2_GAMTLB_Miss
	PS2_GAMTLB_EBB_READ	=	PS2_GAMTLB_Hit + PS2_GAMTLB_Miss + PS2_GAMTLB_HitNotPresent
			
#GAMD			
	PS0_GAMD	=	 SUM(@GAM@.pwr_GAMTLB_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS1_GAMD	=	SUM( @GAM@.pwr_GAMTLB_Stalled_or_Idle.CrClock -  @GAM@.pwr_GAMTLB_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS2_GAMD_READ	=	 SUM(@GAM@.GamRdRoute.pwr_GAM_ReadRequests.CrClock)/(@CLOCKS@*numGAM)
	PS2_GAMD_WRITE_Media	=	0
	PS2_GAMD_WRITE	=	 SUM(@GAM@.GamWrDp.num_total_writes)/(@CLOCKS@*numGAM)
	PS2_GAMD_Cache_READ	=	PS2_GAMD_WRITE
	PS2_GAMD_Cache_WRITE	=	PS2_GAMD_WRITE
			
#GAMWalker			
	PS0_GAMW	=	 SUM(@GAM@.pwr_GAMW_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS1_GAMW	=	SUM( @GAM@.pwr_GAMW_Stalled_or_Idle.CrClock -  @GAM@.pwr_GAMW_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS2_GAMW	=	SUM(@CLOCKS@ -  @GAM@.pwr_GAMW_Stalled_or_Idle.CrClock)/(@CLOCKS@*numGAM)
	PS2_GAMW_Hit	=	PS2_GAMTLB_Hit
	PS2_GAMW_Hit_on_Miss	=	PS2_GAMTLB_HitNotPresent
	PS2_GAMW_One_Walk	=	 SUM(@GAM@.GTTCache.TotalMisses)/(@CLOCKS@*numGAM)
	PS2_GAMW_Two_Walk	=	0
	PS2_GAMW_Three_Walk	=	0
	PS2_GAMW_READ	=	PS2_GAMW_One_Walk
	PS2_GAMW_WRITE	=	PS2_GAMW_One_Walk
	PS2_GAMW_TLB_PEND_READ	=	PS2_GAMTLB_HitNotPresent + PS2_GAMTLB_Miss
	PS2_GAMW_TLB_PEND_WRITE	=	PS2_GAMW_TLB_PEND_READ
			
#GAFM			
	PS0_GAFM	=	1
	PS1_GAFM	=	0
	PS2_GAFM	=	0
			
#GAFS			
	PS0_GAFS	=	1
	PS1_GAFS	=	0
	PS2_GAFS	=	0
			
			
#GAPL3			
	PS0_GAPL3	=	 SUM(@GAM@.GapArbiter.pwr_L3Arb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPL3)
	PS1_GAPL3	=	SUM( @GAM@.GapArbiter.pwr_L3Arb_Stalled_or_Idle.CrClock -  @GAM@.GapArbiter.pwr_L3Arb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPL3)
	PS2_GAPL3	=	SUM(@CLOCKS@ -  @GAM@.GapArbiter.pwr_L3Arb_Stalled_or_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPL3)
			
#GAPZ			
	PS0_GAPZ	=	SUM( @GAM@.GapArbiter.pwr_ZArb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPZ)
	PS1_GAPZ	=	SUM( @GAM@.GapArbiter.pwr_ZArb_Stalled_or_Idle.CrClock -  @GAM@.GapArbiter.pwr_ZArb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPZ)
	PS2_GAPZ	=	SUM(@CLOCKS@ -  @GAM@.GapArbiter.pwr_ZArb_Stalled_or_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPZ)
			
#GAPS			
	PS0_GAPS	=	SUM( @GAM@.GapArbiter.pwr_GAP_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPS)
	PS1_GAPS	=	SUM( @GAM@.GapArbiter.pwr_GAP_Stalled_or_Idle.CrClock -  @GAM@.GapArbiter.pwr_GAP_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPS)
	PS2_GAPS	=	SUM(@CLOCKS@ -  @GAM@.GapArbiter.pwr_GAP_Stalled_or_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPS)
			
#GAPC			
	PS0_GAPC	=	 SUM(@GAM@.GapArbiter.pwr_CArb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPC)
	PS1_GAPC	=	SUM( @GAM@.GapArbiter.pwr_CArb_Stalled_or_Idle.CrClock -  @GAM@.GapArbiter.pwr_CArb_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPC)
	PS2_GAPC	=	SUM(@CLOCKS@ -  @GAM@.GapArbiter.pwr_CArb_Stalled_or_Idle.CrClock)/(@CLOCKS@*num_GAM_GAPC)
			
#GACB			
	PS0_GACB	=	1
	PS1_GACB	=	0
	PS2_GACB	=	0
			
#GAM_DOP			
	PS0_GAM_DOP	=	0
	PS2_GAM_DOP	=	1
			
#GAM_SMALL			
	PS0_GAM_SMALL	=	PS0_GAMTLB
	PS2_GAM_SMALL	=	1-PS0_GAMTLB
			
#GAM_GLUE			
	PS0_GAM_GLUE	=	PS0_GAMTLB
	PS2_GAM_GLUE	=	1-PS0_GAMTLB
			
#GAM_DFX			
	PS0_GAM_DFX	=	PS0_GAMTLB
	PS2_GAM_DFX	=	1-PS0_GAMTLB
